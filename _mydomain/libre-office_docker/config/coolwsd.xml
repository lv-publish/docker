<?xml version="1.0" encoding="UTF-8"?>
<config>
    <!-- Service root path for subpath deployment -->
    <service_root>/liboffice</service_root>
    
    <!-- Server settings -->
    <server_name></server_name>
    <file_server_root_path>loleaflet/../</file_server_root_path>
    
    <!-- Logging -->
    <logging>
        <anonymize>
            <anonymize_user_data desc="Anonymize user-data in logs. If default is true, logger.anonymize_user_data may be overridden by a per-request value. This flag requires a restart." type="bool" default="false"></anonymize_user_data>
        </anonymize>
        <level desc="Can be 0-8, or none (turns off logging), fatal, critical, error, warning, notice, information, debug, trace" type="string" default="warning">warning</level>
        <most_verbose_level_settable_from_client desc="The most verbose level that is allowed to be set from the client" type="string" default="notice">notice</most_verbose_level_settable_from_client>
        <least_verbose_level_settable_from_client desc="The least verbose level that is allowed to be set from the client" type="string" default="fatal">fatal</least_verbose_level_settable_from_client>
        <protocol desc="true for logging network traffic" type="bool" default="false">false</protocol>
        <lokit_sal_log desc="-1 for disable, 0 for auto, 1 for enable" type="string" default="auto">auto</lokit_sal_log>
        <file enable="true">
            <property name="path" desc="Log file path.">/var/log/coolwsd.log</property>
            <property name="rotation" desc="Log file rotation strategy. See Poco FileChannel.">never</property>
            <property name="archive" desc="Append either timestamp or number to the archived log filename.">timestamp</property>
            <property name="compress" desc="Enable/disable log file compression.">true</property>
            <property name="purgeAge" desc="The maximum age of log files to preserve. See Poco FileChannel.">10 days</property>
            <property name="purgeCount" desc="The maximum number of log archives to preserve. Use 'none' to disable purging. See Poco FileChannel.">10</property>
            <property name="rotateOnOpen" desc="Enable/disable log file rotation on opening.">true</property>
            <property name="flush" desc="Enable/disable flushing after logging each line. May harm performance. Note that without flushing after each line, the log lines from the different processes will not appear in chronological order.">false</property>
        </file>
        <syslog enable="false">
            <property name="facility" desc="Syslog facility to use.">LOG_USER</property>
            <property name="logLevel" desc="Lowest log level to send to syslog.">error</property>
        </syslog>
    </logging>

    <!-- Network settings -->
    <net>
        <proto type="string" default="all" desc="Protocol to use IPv4, IPv6 or all for both">all</proto>
        <listen type="string" default="any" desc="Listen address that coolwsd binds to. Can be 'any' or 'loopback'.">any</listen>
        <service_root type="path" default="" desc="Path to prepend to all the pages, websockets, etc. useful for putting coolwsd behind a reverse-proxy">/liboffice</service_root>
        <post_allow desc="Allow/deny client IP address for POST(REST)." allow="true">
            <host desc="The IPv4 private 192.168 block as plain IPv4 dotted decimal addresses.">192\.168\.[0-9]{1,3}\.[0-9]{1,3}</host>
            <host desc="Ditto, but as IPv4-mapped IPv6 addresses">::ffff:192\.168\.[0-9]{1,3}\.[0-9]{1,3}</host>
            <host desc="The IPv4 loopback (localhost) address.">127\.0\.0\.1</host>
            <host desc="Ditto, but as IPv4-mapped IPv6 address">::ffff:127\.0\.0\.1</host>
            <host desc="The IPv6 loopback (localhost) address.">::1</host>
            <host desc="The IPv4 private 172.16.0.0-172.31.255.255 block as plain IPv4 dotted decimal addresses.">172\.1[6789]\.[0-9]{1,3}\.[0-9]{1,3}</host>
            <host desc="The IPv4 private 172.16.0.0-172.31.255.255 block as plain IPv4 dotted decimal addresses.">172\.2[0-9]\.[0-9]{1,3}\.[0-9]{1,3}</host>
            <host desc="The IPv4 private 172.16.0.0-172.31.255.255 block as plain IPv4 dotted decimal addresses.">172\.3[01]\.[0-9]{1,3}\.[0-9]{1,3}</host>
            <host desc="Ditto, but as IPv4-mapped IPv6 addresses">::ffff:172\.1[6789]\.[0-9]{1,3}\.[0-9]{1,3}</host>
            <host desc="Ditto, but as IPv4-mapped IPv6 addresses">::ffff:172\.2[0-9]\.[0-9]{1,3}\.[0-9]{1,3}</host>
            <host desc="Ditto, but as IPv4-mapped IPv6 addresses">::ffff:172\.3[01]\.[0-9]{1,3}\.[0-9]{1,3}</host>
            <host desc="The IPv4 private 10.0.0.0-10.255.255.255 block as plain IPv4 dotted decimal addresses.">10\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}</host>
            <host desc="Ditto, but as IPv4-mapped IPv6 addresses">::ffff:10\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}</host>
        </post_allow>
        <frame_ancestors desc="Specify who is allowed to embed the LO Online iframe (coolwsd and WOPI host are always allowed). Separate multiple hosts by space.">*</frame_ancestors>
        <connection_timeout_secs desc="Specifies the connection, send, recv timeout in seconds for connections initiated by coolwsd (such as WOPI connections)." type="int" default="30">30</connection_timeout_secs>
    </net>

    <!-- SSL Configuration -->
    <ssl desc="SSL settings">
        <enable type="bool" desc="Controls whether SSL encryption is enable (do not disable for production deployment). If default is false, must first be compiled with SSL support to enable." default="true">false</enable>
        <termination desc="Connection via proxy where coolwsd acts as working via https, but actually uses http." type="bool" default="true">true</termination>
        <cert_file_path desc="Path to the cert file" relative="false">/etc/coolwsd/cert.pem</cert_file_path>
        <key_file_path desc="Path to the key file" relative="false">/etc/coolwsd/key.pem</key_file_path>
        <ca_file_path desc="Path to the ca file" relative="false">/etc/coolwsd/ca-chain.cert.pem</ca_file_path>
        <cipher_list desc="List of OpenSSL ciphers to accept" default="ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH"></cipher_list>
        <hpkp desc="Enable HTTP Public key pinning" enable="false" report_only="false">
            <max_age desc="HPKP's max-age directive - time in seconds browser should remember the pins" enable="true">1000</max_age>
            <report_uri desc="HPKP's report-uri directive - pin validation failure are reported at this URL" enable="false"></report_uri>
            <pins desc="Base64 encoded SPKI fingerprints of keys to be pinned">
            <pin></pin>
            </pins>
        </hpkp>
    </ssl>

    <!-- Security -->
    <security desc="Altering these defaults may prove insecure">
        <seccomp desc="Should we use the seccomp system call filtering." type="bool" default="true">true</seccomp>
        <capabilities desc="Should we require capabilities to isolate processes into chroot jails" type="bool" default="true">true</capabilities>
        <jwt_expiry_secs desc="Time in seconds before the Admin Console's JWT token expires" type="int" default="1800">1800</jwt_expiry_secs>
        <enable_macros_execution desc="Specifies whether the macro execution is enabled in general. This may be overridden per document." type="bool" default="false">false</enable_macros_execution>
        <macro_security_level desc="Level of Macro security. 1 (Medium) Confirmation required before executing macros from untrusted sources. 0 (Low, not recommended) All macros will be executed without confirmation." type="int" default="1">1</macro_security_level>
        <enable_metrics_unauthenticated desc="When enabled, the /cool/getMetrics endpoint allows retrieval of metrics without the need of providing a JWT token." type="bool" default="false">false</enable_metrics_unauthenticated>
    </security>

    <!-- File server -->
    <file_server_root_path desc="Path to the directory that should be considered root for the file server. This should be the directory containing loleaflet." type="path" relative="true" default="loleaflet/../">loleaflet/../</file_server_root_path>

    <!-- Admin console -->
    <admin_console desc="Web admin console settings.">
        <enable desc="Enable the admin console functionality" type="bool" default="true">true</enable>
        <enable_pam desc="Enable admin user authentication with PAM" type="bool" default="false">false</enable_pam>
        <username desc="The username of the admin console. Ignored if PAM is enabled.">admin</username>
        <password desc="The password of the admin console. Deprecated on most platforms. Instead, use PAM or coolconfig to set up a secure password.">admin123</password>
    </admin_console>
</config>